# 更新日志

本文档记录了 OPML Gardener 的所有重要更改。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
版本号遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

---

## [1.0.0] - 2025-12-01

### ✨ 新增功能

#### 核心功能
- **OPML 文件导入**
  - 支持拖拽上传
  - 支持点击选择文件
  - 自动解析嵌套的 OPML 结构
  - 正确识别分类和订阅源层级

- **订阅源管理**
  - 表格视图展示所有订阅源
  - 实时编辑标题、分类、RSS 链接、网站链接
  - 支持删除单个订阅源
  - 支持打开订阅源网站

- **搜索和筛选**
  - 全局搜索（标题和链接）
  - 按分类筛选
  - 实时更新筛选结果
  - 显示筛选后的数量统计

- **批量操作**
  - 全选/取消全选
  - 批量选择订阅源
  - 导出选中的订阅源

- **去重功能**
  - 自动检测重复的 RSS URL
  - 一键删除重复项
  - 显示删除数量反馈

- **导出功能**
  - 导出全部订阅源为 OPML
  - 导出选中的订阅源为 OPML
  - 保持原有的分类结构
  - 标准 OPML 2.0 格式

#### UI/UX
- 简洁现代的界面设计
- 使用 Inter 字体提升阅读体验
- 响应式布局，适配不同屏幕尺寸
- 操作成功/失败的通知提示
- 清晰的状态反馈（已选数量、总数等）
- 空状态友好提示

#### 技术特性
- 完全的 TypeScript 类型支持
- 客户端处理，保护用户隐私
- 无需后端服务器
- 使用 Next.js 14 App Router
- 基于 Tailwind CSS 的样式系统
- shadcn/ui 组件库

### 📚 文档

- **README.md** - 项目概述和功能介绍
- **快速开始.md** - 快速安装和启动指南
- **使用指南.md** - 详细的使用说明
- **开发文档.md** - 技术架构和开发指南
- **部署指南.md** - 多平台部署说明
- **CHANGELOG.md** - 版本更新记录

### 📦 依赖

#### 生产依赖
- next: ^14.2.0
- react: ^18.3.0
- react-dom: ^18.3.0
- fast-xml-parser: ^4.3.6
- lucide-react: ^0.344.0
- class-variance-authority: ^0.7.0
- clsx: ^2.1.0
- tailwind-merge: ^2.2.1

#### 开发依赖
- typescript: ^5.3.3
- tailwindcss: ^3.4.1
- eslint: ^8.56.0
- @types/node: ^20.11.0
- @types/react: ^18.2.55

### 🗂️ 文件结构

```
OPMLGardener/
├── app/                    # Next.js App Router
├── components/            # React 组件
├── hooks/                # 自定义 Hooks
├── lib/                  # 工具函数
├── types/                # TypeScript 类型
├── example.opml          # 示例文件
└── [文档文件]
```

### 🎯 支持的功能列表

- [x] OPML 文件导入（拖拽/选择）
- [x] 订阅源表格展示
- [x] 实时编辑订阅源信息
- [x] 搜索订阅源
- [x] 按分类筛选
- [x] 批量选择
- [x] 删除订阅源
- [x] 去除重复订阅源
- [x] 导出全部订阅源
- [x] 导出选中的订阅源
- [x] 操作通知反馈

---

## [1.3.0] - 2025-12-01

### 🎯 多维表格式重大重构

**设计理念转变：从传统筛选栏 → 一体化多维表格**

- **表格内集成筛选**
  - ✅ 移除左侧独立筛选栏
  - ✅ 所有筛选功能集成到表格顶部
  - ✅ 搜索框内置清除按钮
  - ✅ 下拉选择验证状态（显示数量）
  - ✅ 下拉选择分类
  - ✅ 一键清除所有筛选
  - ✅ 实时显示筛选结果数量
  
- **操作按钮重新布局**
  - ✅ 操作按钮移至表格上方
  - ✅ 水平排列更紧凑
  - ✅ 使用分隔线分组
  - ✅ 全宽视图更好利用空间

- **新增"最后更新"字段**
  - ✅ RSS 有效时显示更新时间
  - ✅ 智能格式化（今天、昨天、X天前等）
  - ✅ 无效或未检测显示 "-"
  - ✅ 支持点击排序
  - ✅ 悬停显示完整日期时间
  
- **RSS 验证增强**
  - ✅ 验证时获取 RSS 最后更新时间
  - ✅ 解析 lastBuildDate、pubDate、updated、dc:date 等字段
  - ✅ 使用 GET 请求获取完整内容
  - ✅ 批量并发验证（10个/批次）

### 🎨 UI 体验提升

- **空间利用优化**
  - 移除侧边栏，表格占据全宽
  - 操作更集中，视线移动更少
  - 所有功能触手可及

- **交互改进**
  - 筛选即时生效
  - 搜索框内置清除
  - 下拉框显示数量
  - 一键清除所有筛选

---

## [1.2.2] - 2025-12-01

### 🎨 UI 全面重设计

**不只是改颜色，而是重新思考整个视觉系统**

- **视觉层次优化**
  - 渐变背景增加深度
  - Logo 发光效果
  - 三色渐变文字
  - 毛玻璃卡片设计
  
- **布局改进**
  - 更宽的容器利用空间
  - 增加间距提升通透感
  - 优化空状态设计
  - 统一圆角和阴影
  
- **交互优化**
  - 渐变悬停效果
  - 微动画过渡
  - 脉冲验证指示器
  - 改进的按钮状态
  
- **组件重设计**
  - 侧边栏卡片统一风格
  - 渐变筛选按钮
  - 表格行渐变效果
  - 自定义滚动条

### ✅ RSS 验证修复

**真正的URL验证，不只是格式检查**

- **智能验证策略**
  - HEAD 请求优先（5秒超时）
  - CORS 失败自动降级
  - GET + no-cors 兜底
  - 详细错误信息
  
- **性能优化**
  - 批量并发处理（10个/批次）
  - 实时进度显示
  - 合理的超时控制
  - 优雅的错误处理
  
- **统计准确性**
  - 实时更新验证状态
  - 准确的有效/无效/未检测计数
  - 验证进度可视化

---

## [1.2.1] - 2025-12-01

### ⚡ 优化改进

- **RSS 验证优化**
  - 导入后自动在后台逐步验证
  - 列表中直接显示验证状态图标
  - 侧边栏支持按状态筛选（全部/有效/无效/未检测）
  - 显示各状态数量统计
  - 移除独立验证对话框，提升使用便捷性

- **排序功能优化**
  - 排序功能移至表头字段
  - 点击表头即可排序
  - 支持按标题、分类、RSS链接、验证状态排序
  - 排序图标显示当前状态
  - 移除侧边栏排序选项，界面更简洁

### 🗑️ 移除功能

- **标签系统**
  - 移除订阅源标签功能
  - 简化数据结构
  - 专注核心功能

---

## [1.2.0] - 2025-12-01

### ✨ 新增功能 (v1.2.0)

- **RSS 链接有效性检查**
  - 批量验证所有订阅源的 RSS 链接
  - 标记有效/无效的订阅源
  
- **订阅源排序功能**
  - 支持多字段排序
  - 升序/降序切换
  - 实时排序更新

- **导入/导出 JSON 格式**
  - 支持导入 JSON 格式的订阅源
  - 支持导出为 JSON 格式
  - JSON 格式包含完整的元数据

- **键盘快捷键支持**
  - Ctrl+Z: 撤销
  - Ctrl+Y: 重做
  - Ctrl+S: 导出全部
  - Ctrl+A: 全选

---

## [1.1.0] - 2025-12-01

### ✨ 新增功能 (v1.1.0)

- **撤销/重做功能**
  - 支持撤销/重做所有编辑操作
  - 保留最近 50 次操作历史
  - 快捷键支持 (Ctrl+Z / Ctrl+Y)

- **手动添加新分类**
  - 通过对话框创建新分类
  - 验证分类名称唯一性
  - 支持 Enter 键快速添加

- **导出前预览**
  - 在导出前预览订阅源列表
  - 按分类分组显示
  - 支持选择导出格式 (OPML/JSON)

- **深色模式**
  - 完整的深色主题支持
  - 自动跟随系统主题
  - 一键切换浅色/深色模式

- **批量编辑分类 UI**
  - 批量修改多个订阅源的分类
  - 显示选中订阅源列表
  - 一键应用到所有选中项

---

## [未来计划]

### 计划中的功能

#### 长期 (v2.0.0)
- [ ] 订阅源分组功能
- [ ] 自定义主题
- [ ] 导出模板系统
- [ ] 订阅源统计分析
- [ ] 浏览器扩展版本

---

## 版本说明

### 版本号规则

- **主版本号 (Major)**: 不兼容的 API 修改
- **次版本号 (Minor)**: 向下兼容的功能性新增
- **修订号 (Patch)**: 向下兼容的问题修正

### 更新类型

- ✨ **新增** - 新功能
- 🐛 **修复** - Bug 修复
- 📚 **文档** - 文档更新
- 🎨 **样式** - UI/样式改进
- ⚡ **性能** - 性能优化
- ♻️ **重构** - 代码重构
- 🔧 **配置** - 配置变更
- 🗑️ **废弃** - 即将移除的功能
- 🚨 **移除** - 已移除的功能

---

**第一个正式版本发布！** 🎉

感谢使用 OPML Gardener！

